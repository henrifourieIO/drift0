import{StrictMode as Fe}from"react";import{createRoot as Re}from"react-dom/client";import{useState as ve}from"react";import{useState as j,useEffect as ge,useRef as Le}from"react";import{useState as fe,useEffect as Se,useRef as ce}from"react";import{Fragment as he,jsx as p,jsxs as N}from"react/jsx-runtime";var me={inToCm:2.54,cmToIn:.3937,inToMm:25.4,mmToIn:.03937,mToYds:1.09361,ydsToM:.9144},je={ipsc:{size:18,name:"IPSC",shape:"rect",width:18,height:30,gridLines:6},"nra-b8":{size:5.5,name:"NRA B-8",shape:"circle",gridLines:5},"steel-12":{size:12,name:'12" Steel',shape:"circle",gridLines:6},"steel-8":{size:8,name:'8" Steel',shape:"circle",gridLines:4},"deer-vitals":{size:10,name:"Deer Vitals",shape:"circle",gridLines:5},"elk-vitals":{size:14,name:"Elk Vitals",shape:"circle",gridLines:7}};function ye({drop:g,windDrift:x,distance:A,unitSystem:S,onClose:V,onScopeAdjustment:z}){let[I,F]=fe("ipsc"),[R,E]=fe("rings"),_=ce(null),M=ce(null),W=ce(null),T=ce(null),C=S==="metric",f=je[I],Y=f.size,re=C?(Y*me.inToCm).toFixed(1):Y,P=g*me.mmToIn,X=x*me.mmToIn,$=C?g.toFixed(1):P.toFixed(1),ee=C?x.toFixed(1):X.toFixed(1),Z=C?A:Math.round(A*me.mToYds),w=Math.sqrt(P*P+X*X),ae=Y/2,y=w<=ae,te=()=>f.shape!=="rect"||!f.width||!f.height?y:Math.abs(X)<=f.width/2&&Math.abs(P)<=f.height/2,q=f.shape==="rect"?te():y;Se(()=>{ie()},[I,R]);let ie=()=>{let d=M.current,n=W.current,l=T.current;if(!(!d||!n||!l))if(d.innerHTML="",n.innerHTML="",l.style.display="none",R==="rings"){d.style.display="flex",n.style.display="none";let o=f.gridLines||4;for(let h=1;h<=o;h++){let v=document.createElement("div");v.className="target-ring";let i=h/o*90;v.style.width=i+"%",v.style.height=i+"%",d.appendChild(v)}}else{d.style.display="none",n.style.display="block";let o=f.gridLines||6,v=180/o;for(let i=0;i<=o;i++){let u=document.createElement("div");u.className="target-grid-line h"+(i===o/2?" major":""),u.style.top=i*v+"px",n.appendChild(u)}for(let i=0;i<=o;i++){let u=document.createElement("div");u.className="target-grid-line v"+(i===o/2?" major":""),u.style.left=i*v+"px",n.appendChild(u)}if(l.style.display="block",l.className="target-shape",f.shape==="circle")l.classList.add("circle"),l.style.width="80%",l.style.height="80%";else if(f.shape==="rect"&&f.width&&f.height){let i=f.height/f.width;i>1?(l.style.height="90%",l.style.width=90/i+"%"):(l.style.width="90%",l.style.height=90*i+"%")}else l.style.width="80%",l.style.height="80%"}},s=(()=>{let h=162/Y,v=90+X*h,i=90+P*h,u=6;return{x:Math.max(u,Math.min(180-u,v)),y:Math.max(u,Math.min(180-u,i))}})();return N("div",{className:"drift-visualizer",onClick:d=>d.stopPropagation(),children:[N("div",{className:"drift-visualizer-header",children:[N("h4",{children:["Impact at ",Z," ",C?"m":"yds"]}),p("button",{className:"drift-close-btn",onClick:V,children:"\xD7"})]}),N("div",{className:"drift-controls",children:[N("div",{className:"drift-control-group",children:[p("label",{children:"Target"}),N("select",{value:I,onChange:d=>F(d.target.value),children:[p("option",{value:"ipsc",children:'IPSC (18"\xD730")'}),p("option",{value:"nra-b8",children:'NRA B-8 (5.5")'}),p("option",{value:"steel-12",children:'12" Steel'}),p("option",{value:"steel-8",children:'8" Steel'}),p("option",{value:"deer-vitals",children:'Deer Vitals (10")'}),p("option",{value:"elk-vitals",children:'Elk Vitals (14")'})]})]}),N("div",{className:"drift-display-toggle",children:[p("button",{className:R==="rings"?"active":"",onClick:()=>E("rings"),children:"Rings"}),p("button",{className:R==="grid"?"active":"",onClick:()=>E("grid"),children:"Grid"})]})]}),N("div",{className:"drift-target-wrapper",children:[N("div",{className:"drift-target-visual",ref:_,children:[p("div",{className:"target-crosshair h"}),p("div",{className:"target-crosshair v"}),p("div",{className:"target-rings",ref:M}),p("div",{className:"target-grid",ref:W,style:{display:"none"}}),p("div",{className:"target-shape",ref:T,style:{display:"none"}}),p("div",{className:`drift-marker ${q?"on-target":"off-target"}`,style:{left:s.x+"px",top:s.y+"px"}})]}),N("div",{className:"drift-target-label",children:[re,C?"cm":'"'," target"]})]}),N("div",{className:"drift-stats",children:[N("div",{className:"drift-stat",children:[p("span",{className:"drift-stat-label",children:"Drop"}),N("span",{className:`drift-stat-value ${Math.abs(g)>12.7?"negative":"positive"}`,children:[g>0?"+":"",$,C?"mm":'"']})]}),N("div",{className:"drift-stat",children:[p("span",{className:"drift-stat-label",children:"Wind Drift"}),N("span",{className:`drift-stat-value ${Math.abs(x)>12.7?"negative":"positive"}`,children:[x>0?"+":"",ee,C?"mm":'"']})]})]}),p("div",{className:`drift-verdict ${q?"hit":"miss"}`,children:q?N(he,{children:[p("span",{className:"verdict-icon",children:"\u2713"}),p("span",{children:"On Target"})]}):N(he,{children:[p("span",{className:"verdict-icon",children:"\u2717"}),p("span",{children:"Off Target"})]})}),z&&N("button",{className:"drift-scope-btn",onClick:()=>{z({offsetX:x,offsetY:-g,distance:A}),V()},children:[N("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",width:"14",height:"14",children:[p("circle",{cx:"12",cy:"12",r:"10"}),p("circle",{cx:"12",cy:"12",r:"3"}),p("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),p("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),p("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),p("line",{x1:"18",y1:"12",x2:"22",y2:"12"})]}),"Get Scope Adjustment"]})]})}import{Fragment as De,jsx as r,jsxs as t}from"react/jsx-runtime";var b={fpsToMs:.3048,msToFps:3.28084,ydsToM:.9144,mToYds:1.09361,grToG:.0648,gToGr:15.4324,ftlbToJ:1.3558,jToFtlb:.7376,inToCm:2.54,cmToIn:.3937,mphToMs:.44704,msToMph:2.23694,ftToM:.3048,mToFt:3.28084,inToMm:25.4,mmToIn:.03937};function xe(g){return(g-32)*5/9}function Ae(g){return g*9/5+32}var Ie={556:{muzzleVelocity:3100,bulletWeight:62,ballisticCoefficient:.307},"762x39":{muzzleVelocity:2350,bulletWeight:123,ballisticCoefficient:.3},243:{muzzleVelocity:3025,bulletWeight:105,ballisticCoefficient:.5},270:{muzzleVelocity:2950,bulletWeight:150,ballisticCoefficient:.496},308:{muzzleVelocity:2700,bulletWeight:168,ballisticCoefficient:.462},"762x54r":{muzzleVelocity:2580,bulletWeight:174,ballisticCoefficient:.4},3006:{muzzleVelocity:2750,bulletWeight:175,ballisticCoefficient:.505},"6.5cm":{muzzleVelocity:2700,bulletWeight:140,ballisticCoefficient:.61},"6.5prc":{muzzleVelocity:2900,bulletWeight:143,ballisticCoefficient:.625},"300wm":{muzzleVelocity:2950,bulletWeight:190,ballisticCoefficient:.533},"300prc":{muzzleVelocity:2880,bulletWeight:225,ballisticCoefficient:.691},"338lm":{muzzleVelocity:2750,bulletWeight:300,ballisticCoefficient:.768},"375ct":{muzzleVelocity:2850,bulletWeight:350,ballisticCoefficient:.945},"50bmg":{muzzleVelocity:2800,bulletWeight:750,ballisticCoefficient:1.05}};function Ne({unitSystem:g,onUnitSystemChange:x,onScopeAdjustment:A}){let[S,V]=j(2700),[z,I]=j(168),[F,R]=j(.462),[E,_]=j(100),[M,W]=j(1.5),[T,C]=j(1e3),[f,Y]=j(10),[re,P]=j(90),[X,$]=j(59),[ee,Z]=j(0),[w,ae]=j(null),[y,te]=j("moa"),[q,ie]=j(!1),[oe,s]=j(null),d=Le(g),n=e=>{let k=Ie[e];if(k){let a=k.muzzleVelocity,D=k.bulletWeight;g==="metric"&&(a=Math.round(a*b.fpsToMs),D=Number((D*b.grToG).toFixed(1))),V(a),I(D),R(k.ballisticCoefficient)}},l=async()=>{ie(!0);try{let e=S,k=z,a=E,D=M,K=T,Q=f,O=X,se=ee;g==="imperial"&&(e=e*b.fpsToMs,k=k*b.grToG,a=a*b.ydsToM,D=D*b.inToMm,K=K*b.ydsToM,Q=Q*b.mphToMs,O=xe(O),se=se*b.ftToM);let be=await fetch("/api/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({muzzleVelocity:e,bulletWeight:k,ballisticCoefficient:F,zeroRange:a,targetDistance:K,windSpeed:Q,windAngle:re,sightHeight:D,temperature:O,altitude:se})});if(!be.ok)throw new Error("Calculation failed");let Te=await be.json();ae(Te)}catch(e){alert("Error: "+(e instanceof Error?e.message:String(e)))}finally{ie(!1)}};ge(()=>{if(d.current===g)return;let e=d.current;g==="metric"?(V(a=>Math.round(a*b.fpsToMs)),I(a=>Number((a*b.grToG).toFixed(1))),_(a=>Math.round(a*b.ydsToM)),W(a=>Number((a*b.inToMm).toFixed(0))),C(a=>Math.round(a*b.ydsToM)),Y(a=>Number((a*b.mphToMs).toFixed(1))),$(a=>Math.round(xe(a))),Z(a=>Math.round(a*b.ftToM))):(V(a=>Math.round(a*b.msToFps)),I(a=>Number((a*b.gToGr).toFixed(0))),_(a=>Math.round(a*b.mToYds)),W(a=>Number((a*b.mmToIn).toFixed(1))),C(a=>Math.round(a*b.mToYds)),Y(a=>Number((a*b.msToMph).toFixed(0))),$(a=>Math.round(Ae(a))),Z(a=>Math.round(a*b.mToFt))),d.current=g},[g]),ge(()=>{l()},[]),ge(()=>{let e=k=>{let a=k.target;!a.closest(".drift-visualizer")&&!a.closest(".clickable-row")&&s(null)};if(oe!==null)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[oe]);let o=g==="metric",h=o?"m":"yds",v=o?"m/s":"fps",i=o?"J":"ft-lb",u=o?"mm":'"',J=e=>o?e:Math.round(e*b.mToYds),B=e=>o?e:Math.round(e*b.msToFps),U=e=>o?e:Math.round(e*b.jToFtlb),le=e=>o?e:Number((e*b.mmToIn).toFixed(1));return t("div",{className:"grid",children:[r("div",{className:"sidebar",children:t("div",{className:"card",children:[r("h3",{className:"card-title",children:"Cartridge"}),t("div",{className:"presets",children:[r("button",{className:"preset-btn",onClick:()=>n("556"),children:"5.56 NATO"}),r("button",{className:"preset-btn",onClick:()=>n("762x39"),children:"7.62x39"}),r("button",{className:"preset-btn",onClick:()=>n("308"),children:"308 Win"}),r("button",{className:"preset-btn",onClick:()=>n("762x54r"),children:"7.62x54R"}),r("button",{className:"preset-btn",onClick:()=>n("6.5cm"),children:"6.5 Creedmoor"}),r("button",{className:"preset-btn",onClick:()=>n("6.5prc"),children:"6.5 PRC"}),r("button",{className:"preset-btn",onClick:()=>n("243"),children:"243 Win"}),r("button",{className:"preset-btn",onClick:()=>n("270"),children:"270 Win"}),r("button",{className:"preset-btn",onClick:()=>n("3006"),children:"30-06"}),r("button",{className:"preset-btn",onClick:()=>n("300wm"),children:"300 Win Mag"}),r("button",{className:"preset-btn",onClick:()=>n("300prc"),children:"300 PRC"}),r("button",{className:"preset-btn",onClick:()=>n("338lm"),children:"338 Lapua"}),r("button",{className:"preset-btn",onClick:()=>n("375ct"),children:"375 CheyTac"}),r("button",{className:"preset-btn",onClick:()=>n("50bmg"),children:"50 BMG"})]}),t("div",{className:"form-grid",children:[t("div",{className:"form-group",children:[t("label",{children:["Muzzle Velocity"," ",t("span",{className:"label-hint",children:["(",o?"m/s":"fps",")"]})]}),r("input",{type:"number",value:S,onChange:e=>V(Number(e.target.value)),step:"10"})]}),t("div",{className:"form-group",children:[t("label",{children:["Bullet Weight"," ",t("span",{className:"label-hint",children:["(",o?"g":"gr",")"]})]}),r("input",{type:"number",value:z,onChange:e=>I(Number(e.target.value)),step:"1"})]}),t("div",{className:"form-group full",children:[t("label",{children:["Ballistic Coefficient ",r("span",{className:"label-hint",children:"(G1)"})]}),r("input",{type:"number",value:F,onChange:e=>R(Number(e.target.value)),step:"0.001"})]})]}),r("div",{className:"divider"}),r("h3",{className:"card-title",children:"Rifle Setup"}),t("div",{className:"form-grid",children:[t("div",{className:"form-group",children:[t("label",{children:["Zero Range"," ",t("span",{className:"label-hint",children:["(",o?"m":"yds",")"]})]}),r("input",{type:"number",value:E,onChange:e=>_(Number(e.target.value)),step:"25"})]}),t("div",{className:"form-group",children:[t("label",{children:["Sight Height"," ",t("span",{className:"label-hint",children:["(",o?"mm":"in",")"]})]}),r("input",{type:"number",value:M,onChange:e=>W(Number(e.target.value)),step:"0.1"})]}),t("div",{className:"form-group full",children:[t("label",{children:["Target Distance"," ",t("span",{className:"label-hint",children:["(",o?"m":"yds",")"]})]}),r("input",{type:"number",value:T,onChange:e=>C(Number(e.target.value)),step:"50"})]})]}),r("div",{className:"divider"}),r("h3",{className:"card-title",children:"Environment"}),t("div",{className:"form-grid",children:[t("div",{className:"form-group",children:[t("label",{children:["Wind Speed"," ",t("span",{className:"label-hint",children:["(",o?"m/s":"mph",")"]})]}),r("input",{type:"number",value:f,onChange:e=>Y(Number(e.target.value)),step:"1"})]}),t("div",{className:"form-group",children:[t("label",{children:["Wind Angle ",r("span",{className:"label-hint",children:"(deg)"})]}),r("input",{type:"number",value:re,onChange:e=>P(Number(e.target.value)),step:"15"})]}),t("div",{className:"form-group",children:[t("label",{children:["Temperature"," ",t("span",{className:"label-hint",children:["(",o?"\xB0C":"\xB0F",")"]})]}),r("input",{type:"number",value:X,onChange:e=>$(Number(e.target.value)),step:"5"})]}),t("div",{className:"form-group",children:[t("label",{children:["Altitude"," ",t("span",{className:"label-hint",children:["(",o?"m":"ft",")"]})]}),r("input",{type:"number",value:ee,onChange:e=>Z(Number(e.target.value)),step:"500"})]})]}),r("div",{className:"divider"}),r("button",{onClick:l,disabled:q,children:q?"Calculating...":"Calculate Trajectory"})]})}),r("div",{className:"main",children:t("div",{className:"card",children:[t("div",{className:"results-header",children:[r("h2",{children:"Trajectory Table"}),t("div",{className:"unit-toggle",children:[r("button",{className:y==="moa"?"active":"",onClick:()=>te("moa"),children:"MOA"}),r("button",{className:y==="mil"?"active":"",onClick:()=>te("mil"),children:"MIL"})]})]}),r("div",{id:"results",children:!w||w.length===0?t("div",{className:"empty-state",children:[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[r("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),r("circle",{cx:"12",cy:"12",r:"3"})]}),r("p",{children:"Enter your parameters and click Calculate to view the trajectory"})]}):t(De,{children:[t("div",{className:"summary-grid",children:[t("div",{className:"summary-card",children:[r("div",{className:"label",children:"Max Range"}),t("div",{className:"value",children:[J(w[w.length-1].distance)," ",h]})]}),t("div",{className:"summary-card",children:[r("div",{className:"label",children:"Final Velocity"}),t("div",{className:"value",children:[B(w[w.length-1].velocity)," ",v]})]}),t("div",{className:"summary-card",children:[r("div",{className:"label",children:"Final Energy"}),t("div",{className:"value",children:[U(w[w.length-1].energy)," ",i]})]}),t("div",{className:"summary-card",children:[r("div",{className:"label",children:"Time of Flight"}),t("div",{className:"value",children:[w[w.length-1].timeOfFlight,"s"]})]})]}),r("div",{className:"table-wrapper",children:t("table",{children:[r("thead",{children:t("tr",{children:[r("th",{children:"Distance"}),r("th",{children:"Velocity"}),r("th",{children:"Energy"}),t("th",{children:["Drop",r("span",{className:"table-hint",children:"(click row)"})]}),r("th",{children:"Wind"}),r("th",{children:"TOF"}),r("th",{children:y.toUpperCase()})]})}),r("tbody",{children:w.map((e,k)=>{let a=le(e.drop),D=le(e.windDrift),K=Math.abs(e.drop)<.5&&e.distance>0&&e.distance<=150,Q=e.drop>.5||e.drop<-.5?"negative":"positive",O=e.windDrift>0?"negative":"",se=y==="moa"?e.moa:e.mil,de=oe===k;return t("tr",{className:`clickable-row ${K?"highlight-row":""} ${de?"row-active":""}`,onClick:()=>s(de?null:k),children:[t("td",{children:[J(e.distance)," ",h]}),t("td",{children:[B(e.velocity)," ",v]}),t("td",{children:[U(e.energy)," ",i]}),t("td",{className:Q,style:{position:"relative"},children:[a>0?"+":"",a,u,de&&r(ye,{drop:e.drop,windDrift:e.windDrift,distance:e.distance,unitSystem:g,onClose:()=>s(null),onScopeAdjustment:A})]}),t("td",{className:O,children:[D>0?"+":"",D,u]}),t("td",{children:[e.timeOfFlight,"s"]}),t("td",{children:[se>0?"+":"",se]})]},e.distance)})})]})})]})})]})})]})}import{useState as G,useEffect as ue,useRef as pe}from"react";import{Fragment as Ve,jsx as c,jsxs as m}from"react/jsx-runtime";var L={inToCm:2.54,cmToIn:.3937,inToMm:25.4,mmToIn:.03937,mToYds:1.09361,ydsToM:.9144},ke={ipsc:{size:18,name:"IPSC",shape:"rect",width:18,height:30,gridLines:6},"nra-b8":{size:5.5,name:"NRA B-8",shape:"circle",gridLines:5},"moa-grid":{size:10,name:"1 MOA Grid",shape:"square",gridLines:10},"steel-12":{size:12,name:'12" Steel',shape:"circle",gridLines:6},"steel-8":{size:8,name:'8" Steel',shape:"circle",gridLines:4},custom:{size:18,name:"Custom",shape:"square",gridLines:6}};function Ce({unitSystem:g,initialData:x,onDataConsumed:A}){let[S,V]=G("ipsc"),[z,I]=G(18),[F,R]=G(100),[E,_]=G("0.25moa"),[M,W]=G(0),[T,C]=G(0),[f,Y]=G("rings"),[re,P]=G(!1),[X,$]=G({x:0,y:0}),ee=pe(null),Z=pe(null),w=pe(null),ae=pe(null),y=g==="metric";ue(()=>{x&&(y?(W(Number(x.offsetX.toFixed(1))),C(Number(x.offsetY.toFixed(1))),R(Math.round(x.distance))):(W(Number((x.offsetX*L.mmToIn).toFixed(1))),C(Number((x.offsetY*L.mmToIn).toFixed(1))),R(Math.round(x.distance*L.mToYds))),P(!0),A?.())},[x]),ue(()=>{let d=ke[S].size;y&&(d=Number((d*L.inToCm).toFixed(1))),I(d),te()},[S,g,f]),ue(()=>{te()},[f]),ue(()=>{ie()},[M,T,z,F,g]);let te=()=>{let s=ke[S],d=Z.current,n=w.current,l=ae.current;if(!(!d||!n||!l))if(d.innerHTML="",n.innerHTML="",l.style.display="none",f==="rings"){d.style.display="flex",n.style.display="none";let o=s.gridLines||4;for(let h=1;h<=o;h++){let v=document.createElement("div");v.className="target-ring";let i=h/o*90;v.style.width=i+"%",v.style.height=i+"%",d.appendChild(v)}}else{d.style.display="none",n.style.display="block";let o=s.gridLines||6,v=200/o;for(let i=0;i<=o;i++){let u=document.createElement("div");u.className="target-grid-line h"+(i===o/2?" major":""),u.style.top=i*v+"px",n.appendChild(u)}for(let i=0;i<=o;i++){let u=document.createElement("div");u.className="target-grid-line v"+(i===o/2?" major":""),u.style.left=i*v+"px",n.appendChild(u)}if(l.style.display="block",l.className="target-shape",s.shape==="circle")l.classList.add("circle"),l.style.width="80%",l.style.height="80%";else if(s.shape==="rect"&&s.width&&s.height){let i=s.height/s.width;i>1?(l.style.height="90%",l.style.width=90/i+"%"):(l.style.width="90%",l.style.height=90*i+"%")}else l.style.width="80%",l.style.height="80%"}},q=s=>{let d=s.currentTarget.getBoundingClientRect(),n=s.clientX-d.left,l=s.clientY-d.top,o=d.width/2,h=d.height/2,v=z;y&&(v=z*L.cmToIn);let i=d.width/v,u=(n-o)/i,J=-(l-h)/i;$({x:n,y:l}),P(!0);let B=u,U=J;y&&(B=u*L.inToMm,U=J*L.inToMm),W(Number(B.toFixed(1))),C(Number(U.toFixed(1)))},ie=()=>{let s=M,d=T;y&&(s=M*L.mmToIn,d=T*L.mmToIn);let n=ee.current;if(!n)return;let l=z;y&&(l=z*L.cmToIn);let o=n.offsetWidth/l,h=n.offsetWidth/2,v=n.offsetHeight/2,i=h+s*o,u=v-d*o;$({x:i,y:u}),P(Math.abs(M)>.01||Math.abs(T)>.01)},oe=()=>{let s=M,d=T;y&&(s=M*L.mmToIn,d=T*L.mmToIn);let n=F;y&&(n=F*L.mToYds);let l=1/1.047,o=1/3.6,h=100/n,v=s*l*h,i=d*l*h,u=s*o*h,J=d*o*h,B,U,le;if(E.includes("moa")){let O=parseFloat(E);B=Math.round(v/O),U=Math.round(i/O),le=E.replace(/[0-9.]/g,"").toUpperCase()}else{let O=parseFloat(E);B=Math.round(u/O),U=Math.round(J/O),le="MIL"}let e=s>0?"Left":"Right",k=d>0?"Down":"Up",a=s>0?"\u2190":"\u2192",D=d>0?"\u2193":"\u2191",K=Math.abs(B),Q=Math.abs(U);return K===0&&Q===0?c("div",{style:{textAlign:"center",color:"var(--success)",fontSize:"0.875rem"},children:"\u2713 Shot is centered - no adjustment needed"}):m(Ve,{children:[m("div",{className:"adjustment-grid",children:[m("div",{className:"adjustment-item",children:[c("div",{className:"arrow",children:a}),m("div",{className:"direction",children:["Windage (",e,")"]}),c("div",{className:"value",children:K}),c("div",{className:"unit",children:"clicks"})]}),m("div",{className:"adjustment-item",children:[c("div",{className:"arrow",children:D}),m("div",{className:"direction",children:["Elevation (",k,")"]}),c("div",{className:"value",children:Q}),c("div",{className:"unit",children:"clicks"})]})]}),m("div",{className:"click-info",children:[m("strong",{children:[Math.abs(v).toFixed(1)," MOA"]})," ",e.toLowerCase()," \xB7",m("strong",{children:[" ",Math.abs(i).toFixed(1)," MOA"]})," ",k.toLowerCase(),c("br",{}),m("span",{style:{color:"var(--muted)"},children:[Math.abs(u).toFixed(2)," MIL ",e.toLowerCase()," \xB7"," ",Math.abs(J).toFixed(2)," MIL ",k.toLowerCase()]})]})]})};return m("div",{className:"card",children:[c("h2",{className:"card-title",children:"Scope Adjustment"}),c("p",{style:{fontSize:"0.8125rem",color:"var(--muted-foreground)",margin:"0 0 1.25rem 0"},children:"Click on the target where your shot landed to calculate scope adjustments."}),m("div",{className:"target-container",children:[m("div",{children:[m("div",{className:"display-toggle",children:[c("button",{className:f==="rings"?"active":"",onClick:()=>Y("rings"),children:"Rings"}),c("button",{className:f==="grid"?"active":"",onClick:()=>Y("grid"),children:"Grid"})]}),m("div",{className:"target-visual",ref:ee,onClick:q,children:[c("div",{className:"target-crosshair h"}),c("div",{className:"target-crosshair v"}),c("div",{className:"target-rings",ref:Z}),c("div",{className:"target-grid",ref:w,style:{display:"none"}}),c("div",{className:"target-shape",ref:ae,style:{display:"none"}}),re&&c("div",{className:"shot-marker",style:{left:X.x+"px",top:X.y+"px"}})]})]}),m("div",{className:"target-form",children:[m("div",{className:"form-grid",children:[m("div",{className:"form-group",children:[c("label",{children:"Target Type"}),m("select",{value:S,onChange:s=>V(s.target.value),children:[c("option",{value:"ipsc",children:'IPSC/USPSA (18" \xD7 30")'}),c("option",{value:"nra-b8",children:'NRA B-8 (5.5" ring)'}),c("option",{value:"moa-grid",children:"1 MOA Grid"}),c("option",{value:"steel-12",children:'12" Steel'}),c("option",{value:"steel-8",children:'8" Steel'}),c("option",{value:"custom",children:"Custom Size"})]})]}),m("div",{className:"form-group",children:[m("label",{children:["Shot Distance"," ",m("span",{className:"label-hint",children:["(",y?"m":"yds",")"]})]}),c("input",{type:"number",value:F,onChange:s=>R(Number(s.target.value)),step:"25"})]}),m("div",{className:"form-group",children:[m("label",{children:["Target Size"," ",m("span",{className:"label-hint",children:["(",y?"cm":"in",")"]})]}),c("input",{type:"number",value:z,onChange:s=>I(Number(s.target.value)),step:"1"})]}),m("div",{className:"form-group",children:[c("label",{children:"Click Value"}),m("select",{value:E,onChange:s=>_(s.target.value),children:[c("option",{value:"0.25moa",children:"1/4 MOA"}),c("option",{value:"0.5moa",children:"1/2 MOA"}),c("option",{value:"1moa",children:"1 MOA"}),c("option",{value:"0.1mil",children:"0.1 MIL"}),c("option",{value:"0.2mil",children:"0.2 MIL"})]})]}),m("div",{className:"form-group",children:[m("label",{children:["Horizontal Offset"," ",m("span",{className:"label-hint",children:["(",y?"mm":"in",")"]})]}),c("input",{type:"number",value:M,onChange:s=>W(Number(s.target.value)),step:"0.1"}),c("p",{className:"help-text",children:"+ Right, \u2212 Left"})]}),m("div",{className:"form-group",children:[m("label",{children:["Vertical Offset"," ",m("span",{className:"label-hint",children:["(",y?"mm":"in",")"]})]}),c("input",{type:"number",value:T,onChange:s=>C(Number(s.target.value)),step:"0.1"}),c("p",{className:"help-text",children:"+ High, \u2212 Low"})]})]}),c("div",{className:`adjustment-result ${Math.abs(M)>.01||Math.abs(T)>.01?"has-adjustment":""}`,children:Math.abs(M)<.01&&Math.abs(T)<.01?c("div",{style:{textAlign:"center",color:"var(--muted-foreground)",fontSize:"0.875rem"},children:"Click on target or enter offset values to see adjustments"}):oe()})]})]})]})}import{jsx as H,jsxs as ne}from"react/jsx-runtime";function we(){let[g,x]=ve("calculator"),[A,S]=ve("imperial"),[V,z]=ve(null);return ne("div",{className:"container",children:[ne("header",{children:[ne("div",{className:"logo",children:[ne("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[H("circle",{cx:"12",cy:"12",r:"10"}),H("circle",{cx:"12",cy:"12",r:"6"}),H("circle",{cx:"12",cy:"12",r:"2"})]}),H("h1",{children:"Drift"})]}),ne("nav",{className:"nav-tabs",children:[H("button",{className:`nav-tab ${g==="calculator"?"active":""}`,onClick:()=>x("calculator"),children:"Calculator"}),H("button",{className:`nav-tab ${g==="adjustment"?"active":""}`,onClick:()=>x("adjustment"),children:"Scope Adjustment"})]}),ne("div",{className:"system-toggle",children:[H("button",{className:A==="imperial"?"active":"",onClick:()=>S("imperial"),children:"Imperial"}),H("button",{className:A==="metric"?"active":"",onClick:()=>S("metric"),children:"Metric"})]})]}),g==="calculator"&&H(Ne,{unitSystem:A,onUnitSystemChange:S,onScopeAdjustment:F=>{z(F),x("adjustment")}}),g==="adjustment"&&H(Ce,{unitSystem:A,onUnitSystemChange:S,initialData:V,onDataConsumed:()=>z(null)})]})}import{jsx as ze}from"react/jsx-runtime";var Me=document.getElementById("root");if(!Me)throw new Error("Root element not found");var Ee=Re(Me);Ee.render(ze(Fe,{children:ze(we,{})}));
